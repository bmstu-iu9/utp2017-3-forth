<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<button id="bttn">Сохранить в файл</button><br><br>
<input id="fileInput" type="file" size="50" onchange="processFiles(this.files)"><br>
<script>
function downloadURI(uri, name) {
  var link = document.createElement("a");
  link.download = name;
  link.href = uri;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  delete link;
}


bttn.onclick = function() {
	var content = editor.getValue;
	var data = encodeURI(content);
	var url = `data:text/plain;charset=utf-8,${data}`;
	downloadURI(url, 'test.txt');
};

function processFiles(files) {
    var file = files[0];
    var reader = new FileReader();
    reader.onload = function (e) {
		// Когда это событие активируется, данные готовы.
		// Вставляем их в страницу в элемент <div>
		var output = editor.getValue;   
		output.value = e.target.result;
	};
	reader.readAsText(file);
}
</script>
</body>
</html>
